!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("tween",n):t.Tween=n()}(this,function(){"use strict";function t(t){return m.call(t)}function n(n,e){return t(n)==="[object "+e+"]"}function e(t){return n(t,"Number")&&y(t)&&t>=0}function r(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2]);default:return t.apply(n,e)}}function i(t,n){if(!(n>=t.length||n<0)){var e=t.pop();if(n<t.length){var r=t[n];return t[n]=e,r}return e}}function o(){this._tweens=[]}function u(){this._events={}}function a(t,n,e){return(n-t)*e+t}function s(t,n){return I(t)/I(n)/I(t-n)}function c(t,n,e,r,i){var o=.5*(e-t),u=.5*(r-n),a=i*i;return(2*n-2*e+o+u)*(i*a)+(-3*n+3*e-2*o-u)*a+o*i+n}function f(t){if(t._yoyo){var n=t._fromReversed;t._fromReversed=t._from,t._from=n;var e=t._toReversed;t._toReversed=t._to,t._to=e,t._reversed=!t._reversed}}function h(t,n){u.call(this),this._object=t,this._group=n instanceof o?n:O,this._from={},this._to={},this._fromReversed={},this._toReversed={},this._duration=1e3,this._repeat=0,this._repeated=0,this._yoyo=!1,this._elapsed=0,this._offsetTime=0,this._startTime=0,this._delayTime=0,this._repeatDelayTime=0,this._easingFunction=M.Linear.None,this._interpolationFunction=T.Linear,this._chainedTweens=[],this._startEventFired=!1,this._reset=!1,this._active=!1,this._playing=!1,this._reversed=!1}var _,p=Array.prototype,l=Object.prototype,v=p.indexOf,d=p.forEach,m=l.toString,y=Number.isFinite||function(t){return n(number,"Number")&&y(t)},w=v?function(t,n,e){return v.call(t,n,e)}:function(t,n,e){var r=t.length>>>0;for(e=Number(e)||0,(e=Math[e<0?"ceil":"floor"](e))<0&&(e=Math.max(e+r,0));e<r;e++)if(e in t&&t[e]===n)return e;return-1},g=d?function(t,n,e){d.call(t,n,e)}:function(t,n,e){arguments.length;for(var r=0,i=t.length;r<i;r++)n.call(t,t[r],r,t)};_=window&&window.performance&&n(window.performance.now,"Function")?function(){return window.performance.now.call(window.performance)}:n(Date.now,"Function")?Date.now:function(){return(new Date).getTime()},o.prototype={items:function(){return this._tweens},add:function(t){var n=this._tweens;t instanceof h&&-1===w(n,t)&&n.push(t)},remove:function(t){var n=this;if(0===arguments.length)n._tweens=[];else{var e=n._tweens;i(e,w(e,t))}},update:function(t,n){var r=this._tweens;if(0===r.length)return!1;t=e(t)?t:_();for(var o=0;o<r.length;)r[o].update(t)||n?o++:i(r,o);return!0}},u.prototype={on:function(t,e){var r=this._events,i=r[t]||(r[t]=[]);return n(e,"Function")&&i.push(e),this},off:function(t,n){var e=this;switch(arguments.length){case 0:e._events={};break;case 1:delete e._events[t];break;default:var r=events[t];if(r){var i=w(r,n);-1!==i&&r.splice(i,1)}}return e},once:function(t,n){function e(){i.off(t,e),r(n,this,arguments)}var i=this;return i.on(t,e)},emitWith:function(t,e,i){var o=this,u=o._events[t];if(!u||0===u.length)return!1;var a=arguments.length;return a<3&&(i=o),e=a<2?[]:n(e,"Array")?e:[e],g(u,function(t){r(t,i,e)}),!0},emit:function(t){var n=this._events[t];if(!n||0===n.length)return!1;for(var e=[],r=1,i=arguments.length;r<i;r++)e[r-1]=arguments[r];return this.emitWith(t,e)}};var M={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-M.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*M.Bounce.In(2*t):.5*M.Bounce.Out(2*t-1)+.5}}},I=function(){var t=[1];return function(n){var e=1;if(t[n])return t[n];for(var r=n;r>1;r--)e*=r;return t[n]=e,e}}(),T={Linear:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r);return n<0?a(t[0],t[1],r):n>1?a(t[e],t[e-1],e-r):a(t[i],t[i+1>e?e:i+1],r-i)},Bezier:function(t,n){for(var e=0,r=t.length-1,i=Math.pow,o=0;o<=r;o++)e+=i(1-n,r-o)*i(n,o)*t[o]*s(r,o);return e},CatmullRom:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r);return t[0]===t[e]?(n<0&&(i=Math.floor(r=e*(1+n))),c(t[(i-1+e)%e],t[i],t[(i+1)%e],t[(i+2)%e],r-i)):n<0?t[0]-(c(t[0],t[0],t[1],t[1],-r)-t[0]):n>1?t[e]-(c(t[e],t[e],t[e-1],t[e-1],r-e)-t[e]):c(t[i?i-1:0],t[i],t[e<i+1?e:i+1],t[e<i+2?e:i+2],r-i)}},O=new o;return h.now=_,h.Group=o,h.Easing=M,h.Interpolation=T,g(["add","remove","update","items"],function(t){h[t]=function(){return r(O[t],O,arguments)}}),function(t,n,e){function r(){}if(r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t,e)for(var i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])}(h,u,{to:function(t,n){var r=this;return r._reset=!0,r._to=t,e(n)&&(r._duration=n),r},start:function(n){var r=this;if(r._active||!r._to)return r;if(r._active=!0,r._reset){r._reset=!1;var i,o=r._object;r._from={};for(var u in o)i=1*o[u],y(i)&&(r._from[u]=i);var a,s,c,f,h,p,l,v=r._to,d=r._from;r._to={},r._toReversed={},r._fromReversed={};for(var m in v)if(d.hasOwnProperty(m)){if(i=d[m],a=v[m],"[object Array]"===(f=t(a))){h=[],p=[],c=a.length;for(var w=0;w<c;w++){if(s=1*a[w],!y(s)){h=[];break}h.push(s),p=[s].concat(p)}if(0===h.length)continue;p.push(i),a=[i].concat(h),l=p[0]}else if("[object String]"===f){if(/^[+-](?:\d*\.)?\d+$/.test(a))l=i+1*a,p=("+"===a.charAt(0)?"-":"+")+a.substring(1);else if(a*=1,l=a,p=i,!y(a))continue}else{if(!y(a))continue;l=a,p=i}r._to[m]=a,r._toReversed[m]=p,r._fromReversed[m]=l}}return n=e(n)?n:_(),n+=r._delayTime,r._startTime=n,r._offsetTime=r._duration*r._elapsed,r._group.add(r),r},stop:function(){var t=this;if(t._active){t._group.remove(t),t._active=!1,t._playing=!1;var n=t._object;t.emitWith("stop",n,n)}return t.stopChainedTweens(),t},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){return g(this._chainedTweens,function(t){t._active&&t.stop()}),this},delay:function(t){return e(t)&&(this._delayTime=t),this},repeat:function(t){return(e(t)||t===Infinity)&&(this._repeat=t),this},repeatDelay:function(t){var n=this;return e(t)?n._repeatDelayTime=t:n._repeatDelayTime=0,this},yoyo:function(t){return this._yoyo=!!t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},update:function(n){var r=this,i=!0;if((n=e(n)?n:_())<r._startTime)return i;r._playing=!0;var o=r._object,u=r._offsetTime;r._startEventFired||(r._startEventFired=!0,r.emitWith("start",o,o));var a=(n-r._startTime+u)/r._duration;a=a>1?1:a,r._elapsed=a;var s,c,h,p,l=r._to,v=r._from,d=r._yoyo,m=r._easingFunction(a);for(p in l)v.hasOwnProperty(p)&&(c=v[p],"[object Array]"!==(h=t(s=l[p]))?("[object String]"===h&&(s=c+1*s,1!==a||d||(v[p]=s)),o[p]=c+(s-c)*m):o[p]=r._interpolationFunction(s,m));return r.emitWith("update",[o,m,r._reversed],o),1===a?(r._playing=!1,r._offsetTime=0,r._repeated<r._repeat?(r._repeated++,f(r),r._repeatDelayTime>0?n+=r._repeatDelayTime:n+=r._delayTime,r._startTime=n,r.emitWith("repeat",o,o)):(r.emitWith("complete",o,o),r._repeated=0,r._active=!1,r._startEventFired=!1,f(r),g(r._chainedTweens,function(t){t.start(r._startTime-u+r._duration)}),i=!1),r._elapsed=0,i):i},status:function(){var t=this._playing;return{playing:t,active:this._active,reversed:this._reversed,paused:!t&&this._elapsed>0}}}),h});
//# sourceMappingURL=tween.js.map