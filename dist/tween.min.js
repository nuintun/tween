/**
 * @module tween
 * @author nuintun
 * @license MIT
 * @version 0.0.1
 * @description Javascript tweening engine.
 * @see https://nuintun.github.io/tween
 */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("tween",n):t.Tween=n()}(this,function(){"use strict";var t=Array.prototype,n=Object.prototype,e=t.indexOf,r=t.forEach,i=n.toString,o=window.isFinite;function u(t){return i.call(t)}function a(t,n){return u(t)==="[object "+n+"]"}var c=Number.isFinite||function(t){return a(t,"Number")&&o(t)};function s(t){return a(t,"Number")&&c(t)&&t>=0}function f(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2]);default:return t.apply(n,e)}}var h,_=e?function(t,n,r){return e.call(t,n,r)}:function(t,n,e){var r=t.length>>>0;for(e=Number(e)||0,(e=Math[e<0?"ceil":"floor"](e))<0&&(e=Math.max(e+r,0));e<r;e++)if(e in t&&t[e]===n)return e;return-1},p=r?function(t,n,e){r.call(t,n,e)}:function(t,n,e){arguments.length;for(var r=0,i=t.length;r<i;r++)n.call(t,t[r],r,t)};function l(t,n){if(!(n>=t.length||n<0)){var e=t.pop();if(n<t.length){var r=t[n];return t[n]=e,r}return e}}function v(){this._tweens=[]}function d(){this._events={}}h=window&&window.performance&&a(window.performance.now,"Function")?function(){return window.performance.now.call(window.performance)}:a(Date.now,"Function")?Date.now:function(){return(new Date).getTime()},v.prototype={items:function(){return this._tweens},add:function(t){var n=this._tweens;t instanceof b&&-1===_(n,t)&&n.push(t)},remove:function(t){if(0===arguments.length)this._tweens=[];else{var n=this._tweens;l(n,_(n,t))}},update:function(t,n){var e=this._tweens;if(0===e.length)return!1;t=s(t)?t:h();for(var r=0;r<e.length;)e[r].update(t)||n?r++:l(e,r);return!0}},d.prototype={on:function(t,n){var e=this._events,r=e[t]||(e[t]=[]);return a(n,"Function")&&r.push(n),this},off:function(t,n){switch(arguments.length){case 0:this._events={};break;case 1:delete this._events[t];break;default:var e=events[t];if(e){var r=_(e,n);-1!==r&&e.splice(r,1)}}return this},once:function(t,n){var e=this;return e.on(t,function r(){e.off(t,r),f(n,this,arguments)})},emitWith:function(t,n,e){var r=this._events[t];if(!r||0===r.length)return!1;var i=arguments.length;return i<3&&(e=this),n=i<2?[]:a(n,"Array")?n:[n],p(r,function(t){f(t,e,n)}),!0},emit:function(t){var n=this._events[t];if(!n||0===n.length)return!1;for(var e=[],r=1,i=arguments.length;r<i;r++)e[r-1]=arguments[r];return this.emitWith(t,e)}};var m,w={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-w.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*w.Bounce.In(2*t):.5*w.Bounce.Out(2*t-1)+.5}}},y=(m=[1],function(t){var n=1;if(m[t])return m[t];for(var e=t;e>1;e--)n*=e;return m[t]=n,n});function g(t,n,e){return(n-t)*e+t}function M(t,n,e,r,i){var o=.5*(e-t),u=.5*(r-n),a=i*i;return(2*n-2*e+o+u)*(i*a)+(-3*n+3*e-2*o-u)*a+o*i+n}var I={Linear:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r);return n<0?g(t[0],t[1],r):n>1?g(t[e],t[e-1],e-r):g(t[i],t[i+1>e?e:i+1],r-i)},Bezier:function(t,n){for(var e,r,i=0,o=t.length-1,u=Math.pow,a=0;a<=o;a++)i+=u(1-n,o-a)*u(n,a)*t[a]*(r=a,y(e=o)/y(r)/y(e-r));return i},CatmullRom:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r);return t[0]===t[e]?(n<0&&(i=Math.floor(r=e*(1+n))),M(t[(i-1+e)%e],t[i],t[(i+1)%e],t[(i+2)%e],r-i)):n<0?t[0]-(M(t[0],t[0],t[1],t[1],-r)-t[0]):n>1?t[e]-(M(t[e],t[e],t[e-1],t[e-1],r-e)-t[e]):M(t[i?i-1:0],t[i],t[e<i+1?e:i+1],t[e<i+2?e:i+2],r-i)}},T=new v;function O(t){if(t._yoyo){var n=t._fromReversed;t._fromReversed=t._from,t._from=n;var e=t._toReversed;t._toReversed=t._to,t._to=e,t._reversed=!t._reversed}}function b(t,n){var e=this;d.call(e),e._object=t,e._group=n instanceof v?n:T,e._from={},e._to={},e._fromReversed={},e._toReversed={},e._duration=1e3,e._repeat=0,e._repeated=0,e._yoyo=!1,e._elapsed=0,e._offsetTime=0,e._startTime=0,e._delayTime=0,e._repeatDelayTime=0,e._easingFunction=w.Linear.None,e._interpolationFunction=I.Linear,e._chainedTweens=[],e._startEventFired=!1,e._reset=!1,e._active=!1,e._playing=!1,e._reversed=!1}return b.now=h,b.Group=v,b.Easing=w,b.Interpolation=I,p(["add","remove","update","items"],function(t){b[t]=function(){return f(T[t],T,arguments)}}),function(t,n,e){function r(){}if(r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t,e)for(var i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])}(b,d,{to:function(t,n){return this._reset=!0,this._to=t,s(n)&&(this._duration=n),this},start:function(t){var n=this;if(n._active||!n._to)return n;if(n._active=!0,n._reset){var e;n._reset=!1;var r,i,o,a,f,_,p,l=n._object;n._from={};for(var v in l)e=1*l[v],c(e)&&(n._from[v]=e);var d=n._to,m=n._from;n._to={},n._toReversed={},n._fromReversed={};for(var w in d)if(m.hasOwnProperty(w)){if(e=m[w],"[object Array]"===(a=u(r=d[w]))){f=[],_=[],o=r.length;for(var y=0;y<o;y++){if(i=1*r[y],!c(i)){f=[];break}f.push(i),_=[i].concat(_)}if(0===f.length)continue;_.push(e),r=[e].concat(f),p=_[0]}else if("[object String]"===a){if(/^[+-](?:\d*\.)?\d+$/.test(r))p=e+1*r,_=("+"===r.charAt(0)?"-":"+")+r.substring(1);else if(p=r*=1,_=e,!c(r))continue}else{if(!c(r))continue;p=r,_=e}n._to[w]=r,n._toReversed[w]=_,n._fromReversed[w]=p}}return t=s(t)?t:h(),t+=n._delayTime,n._startTime=t,n._offsetTime=n._duration*n._elapsed,n._group.add(n),n},stop:function(){var t=this;if(t._active){t._group.remove(t),t._active=!1,t._playing=!1;var n=t._object;t.emitWith("stop",n,n)}return t.stopChainedTweens(),t},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){return p(this._chainedTweens,function(t){t._active&&t.stop()}),this},delay:function(t){return s(t)&&(this._delayTime=t),this},repeat:function(t){return(s(t)||t===Infinity)&&(this._repeat=t),this},repeatDelay:function(t){return s(t)?this._repeatDelayTime=t:this._repeatDelayTime=0,this},yoyo:function(t){return this._yoyo=!!t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},update:function(t){var n=this,e=!0;if((t=s(t)?t:h())<n._startTime)return e;n._playing=!0;var r=n._object,i=n._offsetTime;n._startEventFired||(n._startEventFired=!0,n.emitWith("start",r,r));var o,a,c,f,_=(t-n._startTime+i)/n._duration;_=_>1?1:_,n._elapsed=_;var l=n._to,v=n._from,d=n._yoyo,m=n._easingFunction(_);for(f in l)v.hasOwnProperty(f)&&(a=v[f],"[object Array]"!==(c=u(o=l[f]))?("[object String]"===c&&(o=a+1*o,1!==_||d||(v[f]=o)),r[f]=a+(o-a)*m):r[f]=n._interpolationFunction(o,m));return n.emitWith("update",[r,m,n._reversed],r),1===_?(n._playing=!1,n._offsetTime=0,n._repeated<n._repeat?(n._repeated++,O(n),n._repeatDelayTime>0?t+=n._repeatDelayTime:t+=n._delayTime,n._startTime=t,n.emitWith("repeat",r,r)):(n.emitWith("complete",r,r),n._repeated=0,n._active=!1,n._startEventFired=!1,O(n),p(n._chainedTweens,function(t){t.start(n._startTime-i+n._duration)}),e=!1),n._elapsed=0,e):e},status:function(){var t=this._playing;return{playing:t,active:this._active,reversed:this._reversed,paused:!t&&this._elapsed>0}}}),b});
//# sourceMappingURL=tween.js.map