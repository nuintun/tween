/**
 * @module tween
 * @author nuintun
 * @license MIT
 * @version 1.0.0
 * @description A pure JavaScript tweening engine.
 * @see https://github.com/nuintun/tween#readme
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tween",e):(t=t||self).Tween=e()}(this,function(){"use strict";var t=Array.prototype,e=Object.prototype,n=t.indexOf,r=t.forEach,i=e.toString,o=window.isFinite;function u(t){return i.call(t)}function s(t,e){return u(t)==="[object "+e+"]"}function a(){}var h=Number.isFinite||function(t){return s(t,"Number")&&o(t)};function c(t){return s(t,"Number")&&h(t)&&t>=0}function f(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2]);default:return t.apply(e,n)}}var _,p=n?function(t,e,r){return n.call(t,e,r)}:function(t,e,n){var r=t.length>>>0;for(n=Number(n)||0,(n=Math[n<0?"ceil":"floor"](n))<0&&(n=Math.max(n+r,0));n<r;n++)if(n in t&&t[n]===e)return n;return-1},l=r?function(t,e,n){r.call(t,e,n)}:function(t,e,n){arguments.length<3&&(n=t);for(var r=0,i=t.length;r<i;r++)e.call(t,t[r],r,t)};function v(t,e){var n=t.length;if(e>=0&&e<n){var r=t.pop();if(e+1<n){var i=t[e];return t[e]=r,i}return r}}function d(){this._tweens=[]}function m(){this._events={}}_=self&&self.performance&&s(self.performance.now,"Function")?function(){return self.performance.now.call(self.performance)}:s(Date.now,"Function")?Date.now:function(){return(new Date).getTime()},d.prototype={items:function(){return this._tweens},add:function(t){var e=this._tweens;t instanceof j&&-1===p(e,t)&&e.push(t)},remove:function(t){if(0===arguments.length)this._tweens=[];else{var e=this._tweens;v(e,p(e,t))}},update:function(t,e){var n=this._tweens;if(0===n.length)return!1;t=c(t)?t:_();for(var r=0;r<n.length;)n[r].update(t)||e?r++:v(n,r);return!0}},m.prototype={on:function(t,e){var n=this._events,r=n[t]||(n[t]=[]);return s(e,"Function")&&r.push(e),this},off:function(t,e){switch(arguments.length){case 0:this._events={};break;case 1:delete this._events[t];break;default:var n=events[t];if(n){var r=p(n,e);-1!==r&&n.splice(r,1)}}return this},once:function(t,e){var n=this;return n.on(t,function r(){n.off(t,r),f(e,this,arguments)})},emitWith:function(t,e,n){var r=this._events[t];if(!r||0===r.length)return!1;var i=arguments.length;return i<3&&(n=this),e=i<2?[]:s(e,"Array")?e:[e],l(r,function(t){f(t,n,e)}),!0},emit:function(t){var e=this._events[t];if(!e||0===e.length)return!1;for(var n=[],r=1,i=arguments.length;r<i;r++)n[r-1]=arguments[r];return this.emitWith(t,n)}};var y,w={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-w.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*w.Bounce.In(2*t):.5*w.Bounce.Out(2*t-1)+.5}}},g=(y=[1],function(t){var e=1;if(y[t])return y[t];for(var n=t;n>1;n--)e*=n;return y[t]=e,e});function M(t,e,n){return(e-t)*n+t}function I(t,e){return g(t)/g(e)/g(t-e)}function T(t,e,n,r,i){var o=.5*(n-t),u=.5*(r-e),s=i*i;return(2*e-2*n+o+u)*(i*s)+(-3*e+3*n-2*o-u)*s+o*i+e}var O={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r);return e<0?M(t[0],t[1],r):e>1?M(t[n],t[n-1],n-r):M(t[i],t[i+1>n?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=0;o<=r;o++)n+=i(1-e,r-o)*i(e,o)*t[o]*I(r,o);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r);return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),T(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(T(t[0],t[0],t[1],t[1],-r)-t[0]):e>1?t[n]-(T(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):T(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)}},b=new d;function F(t){if(t._yoyo){var e=t._fromReversed;t._fromReversed=t._from,t._from=e;var n=t._toReversed;t._toReversed=t._to,t._to=n,t._reversed=!t._reversed}}function j(t,e){m.call(this),this._object=t,this._group=e instanceof d?e:b,this._from={},this._to={},this._fromReversed={},this._toReversed={},this._duration=1e3,this._repeat=0,this._repeated=0,this._yoyo=!1,this._elapsed=0,this._offsetTime=0,this._startTime=0,this._delayTime=0,this._repeatDelayTime=0,this._easingFunction=w.Linear.None,this._interpolationFunction=O.Linear,this._chainedTweens=[],this._startEventFired=!1,this._reset=!1,this._active=!1,this._playing=!1,this._reversed=!1}return j.now=_,j.Group=d,j.Easing=w,j.Interpolation=O,l(["add","remove","update","items"],function(t){j[t]=function(){return f(b[t],b,arguments)}}),function(t,e,n){if(a.prototype=e.prototype,t.prototype=new a,t.prototype.constructor=t,n)for(var r in n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r])}(j,m,{to:function(t,e){return this._reset=!0,this._to=t,c(e)&&(this._duration=e),this},start:function(t){if(this._active||!this._to)return this;if(this._active=!0,this._reset){var e;this._reset=!1;var n,r,i,o,s,a,f,p=this._object;for(var l in this._from={},p)e=1*p[l],h(e)&&(this._from[l]=e);var v=this._to,d=this._from;for(var m in this._to={},this._toReversed={},this._fromReversed={},v)if(d.hasOwnProperty(m)){if(e=d[m],"[object Array]"===(o=u(n=v[m]))){s=[],a=[],i=n.length;for(var y=0;y<i;y++){if(r=1*n[y],!h(r)){s=[];break}s.push(r),a=[r].concat(a)}if(0===s.length)continue;a.push(e),n=[e].concat(s),f=a[0]}else if("[object String]"===o){if(/^[+-](?:\d*\.)?\d+$/.test(n))f=e+1*n,a=("+"===n.charAt(0)?"-":"+")+n.substring(1);else if(f=n*=1,a=e,!h(n))continue}else{if(!h(n))continue;f=n,a=e}this._to[m]=n,this._toReversed[m]=a,this._fromReversed[m]=f}}return t=c(t)?t:_(),t+=this._delayTime,this._startTime=t,this._offsetTime=this._duration*this._elapsed,this._group.add(this),this},stop:function(){if(this._active){this._group.remove(this),this._active=!1,this._playing=!1;var t=this._object;this.emitWith("stop",t,t)}return this.stopChainedTweens(),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){return l(this._chainedTweens,function(t){t._active&&t.stop()}),this},delay:function(t){return c(t)&&(this._delayTime=t),this},repeat:function(t){return(c(t)||t===Infinity)&&(this._repeat=t),this},repeatDelay:function(t){return c(t)?this._repeatDelayTime=t:this._repeatDelayTime=0,this},yoyo:function(t){return this._yoyo=!!t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},update:function(t){var e=this,n=!0;if((t=c(t)?t:_())<e._startTime)return n;e._playing=!0;var r=e._object,i=e._offsetTime;e._startEventFired||(e._startEventFired=!0,e.emitWith("start",r,r));var o,s,a,h,f=(t-e._startTime+i)/e._duration;f=f>1?1:f,e._elapsed=f;var p=e._to,v=e._from,d=e._yoyo,m=e._easingFunction(f);for(h in p)v.hasOwnProperty(h)&&(s=v[h],"[object Array]"!==(a=u(o=p[h]))?("[object String]"===a&&(o=s+1*o,1!==f||d||(v[h]=o)),r[h]=s+(o-s)*m):r[h]=e._interpolationFunction(o,m));return e.emitWith("update",[r,f,e._reversed],r),1===f?(e._playing=!1,e._offsetTime=0,e._repeated<e._repeat?(e._repeated++,F(e),e._repeatDelayTime>0?t+=e._repeatDelayTime:t+=e._delayTime,e._startTime=t,e.emitWith("repeat",r,r)):(e.emitWith("complete",r,r),e._repeated=0,e._active=!1,e._startEventFired=!1,F(e),l(e._chainedTweens,function(t){t.start(e._startTime-i+e._duration)}),n=!1),e._elapsed=0,n):n},status:function(){var t=this._playing;return{playing:t,active:this._active,reversed:this._reversed,paused:!t&&this._elapsed>0}}}),j});
//# sourceMappingURL=tween.js.map