!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("tween",n):t.Tween=n()}(this,function(){"use strict";function t(t){return m.call(t)}function n(n,e){return t(n)==="[object "+e+"]"}function e(t){return n(t,"Number")&&w(t)&&t>=0}function r(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2]);default:return t.apply(n,e)}}function i(t,n){var e=/\.\d+/,r=e.exec(String(t)),i=e.exec(String(n)),u=Math.max(r?r[0].length-1:0,i?i[0].length-1:0);return u?(u=Math.pow(10,u),(t*u+n*u)/u):t+n}function u(){this._tweens=[]}function a(){this._events={}}function o(t,n,e){return(n-t)*e+t}function c(t,n){return I(t)/I(n)/I(t-n)}function s(t,n,e,r,i){var u=.5*(e-t),a=.5*(r-n),o=i*i;return(2*n-2*e+u+a)*(i*o)+(-3*n+3*e-2*u-a)*o+u*i+n}function f(t){var n=this;a.call(n),n._object=t,n._startValues={},n._endValues={},n._startReversed={},n._endReversed={},n._duration=1e3,n._repeat=0,n._repeated=0,n._repeatDelayTime=null,n._yoyo=!1,n._delayTime=0,n._startTime=null,n._easingFunction=M.Linear.None,n._interpolationFunction=O.Linear,n._chainedTweens=[],n._startEventFired=!1,n.playing=!1,n.reversed=!1}function h(t){t._yoyo&&(t._startValues=[t._startReversed,t._startReversed=t._startValues][0],t._endValues=[t._endReversed,t._endReversed=t._endValues][0],t.reversed=!t.reversed)}var l,_=Array.prototype,d=Object.prototype,p=_.indexOf,v=_.forEach,m=d.toString,w=Number.isFinite||function(t){return n(number,"Number")&&w(t)},y=p?function(t,n,e){return p.call(t,n,e)}:function(t,n,e){var r=t.length>>>0;for(e=Number(e)||0,(e=Math[e<0?"ceil":"floor"](e))<0&&(e=Math.max(e+r,0));e<r;e++)if(e in t&&t[e]===n)return e;return-1},g=v?function(t,n,e){v.call(t,n,e)}:function(t,n,e){arguments.length;for(var r=0,i=t.length;r<i;r++)n.call(t,t[r],r,t)};l=window&&window.performance&&n(window.performance.now,"Function")?function(){return window.performance.now.call(window.performance)}:n(Date.now,"Function")?Date.now:function(){return(new Date).getTime()},u.prototype={items:function(){return this._tweens},add:function(t){t instanceof f&&this._tweens.push(t)},remove:function(t){var n=this;if(0===arguments.length)n._tweens=[];else{var e=n._tweens,r=y(e,t);-1!==r&&e.splice(r,1)}},update:function(t,n){var r=this._tweens;if(0===r.length)return!1;var i=0;for(t=e(t)?t:l();i<r.length;)r[i].update(t)||n?i++:r.splice(i,1);return!0}},a.prototype={on:function(t,e){var r=this,i=r._events,u=i[t]||(i[t]=[]);return n(e,"Function")&&u.push(e),r},off:function(t,n){var e=this;switch(arguments.length){case 0:e._events={};break;case 1:delete e._events[t];break;default:var r=events[t];if(r){var i=y(r,n);-1!==i&&r.splice(i,1)}}return e},once:function(t,n){function e(){i.off(t,e),r(n,this,arguments)}var i=this;return i.on(t,e)},emitWith:function(t,e,i){var u=this,a=u._events[t];if(!a||0===a.length)return!1;var o=arguments.length;return o<3&&(i=u),e=o<2?[]:n(e,"Array")?e:[e],g(a,function(t){r(t,i,e)}),!0},emit:function(t){var n=this,e=n._events[t];if(!e||0===e.length)return!1;for(var r=[],i=1,u=arguments.length;i<u;i++)r[i-1]=arguments[i];return n.emitWith(t,r)}};var M={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-M.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*M.Bounce.In(2*t):.5*M.Bounce.Out(2*t-1)+.5}}},I=function(){var t=[1];return function(n){var e=1;if(t[n])return t[n];for(var r=n;r>1;r--)e*=r;return t[n]=e,e}}(),O={Linear:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r);return n<0?o(t[0],t[1],r):n>1?o(t[e],t[e-1],e-r):o(t[i],t[i+1>e?e:i+1],r-i)},Bezier:function(t,n){for(var e=0,r=t.length-1,i=Math.pow,u=0;u<=r;u++)e+=i(1-n,r-u)*i(n,u)*t[u]*c(r,u);return e},CatmullRom:function(t,n){var e=t.length-1,r=e*n,i=Math.floor(r);return t[0]===t[e]?(n<0&&(i=Math.floor(r=e*(1+n))),s(t[(i-1+e)%e],t[i],t[(i+1)%e],t[(i+2)%e],r-i)):n<0?t[0]-(s(t[0],t[0],t[1],t[1],-r)-t[0]):n>1?t[e]-(s(t[e],t[e],t[e-1],t[e-1],r-e)-t[e]):s(t[i?i-1:0],t[i],t[e<i+1?e:i+1],t[e<i+2?e:i+2],r-i)}},T=new u;return f.now=l,f.Easing=M,f.Interpolation=O,g(["add","remove","update","items"],function(t){f[t]=function(){return r(T[t],T,arguments)}}),function(t,n,e){function r(){}if(r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t,e)for(var i in e)e.hasOwnProperty(i)&&(t.prototype[i]=e[i])}(f,a,{to:function(t,n){var r=this;return e(n)&&(r._duration=n),r._endValues=t,r},start:function(n){var r=this;if(!r._startEventFired){var u,a=r._object;r._startValues={};for(var o in a)u=1*a[o],w(u)&&(r._startValues[o]=u);var c,s,f,h,_,d,p=r._endValues,v=r._startValues;r._endValues={},r._startReversed={},r._endReversed={};for(var m in p)if(v.hasOwnProperty(m)){if(u=v[m],c=p[m],"[object Array]"===(h=t(c))){f=c.length,c=[],_=[];for(var y=0;y<f;y++){if(s=1*p[m][y],!w(s)){c=[];break}c.push(s),_=[s].concat(_)}if(0===c.length)continue;c=[u].concat(c),_.push(u),d=_[0]}else if("[object String]"===h){if(/^[+-](?:\d*\.)?\d+$/.test(c))d=i(u,1*c),_=("+"===c.charAt(0)?"-":"+")+c.substring(1);else if(c*=1,d=c,_=u,!w(c))continue}else{if(!w(c))continue;d=c,_=u}r._endValues[m]=c,r._startReversed[m]=d,r._endReversed[m]=_}}return r._repeated=0,r._startEventFired=!1,r._startTime=e(n)?n:l(),r._startTime+=r._delayTime,r.playing=!0,T.add(r),r},stop:function(){var t=this;if(!t.playing)return t;T.remove(t),t.playing=!1,t._startEventFired=!1;var n=t._object;return t.emitWith("stop",n,n),t.stopChainedTweens(),t},end:function(){var t=this;return t.update(t._startTime+t._duration),t},stopChainedTweens:function(){return g(this._chainedTweens,function(t){t.stop()}),this},delay:function(t){return e(t)&&(this._delayTime=t),this},repeat:function(t){return(e(t)||t===Infinity)&&(this._repeat=t),this},repeatDelay:function(t){var n=this;return e(t)?n._repeatDelayTime=t:!1===t&&(n._repeatDelayTime=null),this},yoyo:function(t){return this._yoyo=!!t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},update:function(n){var r,i,u,a=this;if((n=e(n)?n:l())<a._startTime)return!0;var o=a._object;!1===a._startEventFired&&(a.emitWith("start",o,o),a._startEventFired=!0),i=(i=(n-a._startTime)/a._duration)>1?1:i,r=a._easingFunction(i);var c,s,f,_=a._yoyo,d=a._endValues,p=a._startValues;for(u in d)p.hasOwnProperty(u)&&(s=p[u],"[object Array]"!==(f=t(c=d[u]))?("[object String]"===f&&(c=s+1*c,1!==i||_||(p[u]=c)),o[u]=s+(c-s)*r):o[u]=a._interpolationFunction(c,r));return a.emitWith("update",[o,r,a.reversed],o),1!==i||(a._repeated<a._repeat?(a.emitWith("cycle",o,o),a._repeated++,h(a),null!==a._repeatDelayTime?a._startTime=n+a._repeatDelayTime:a._startTime=n+a._delayTime,!0):(a.emitWith("complete",o,o),h(a),g(a._chainedTweens,function(t){t.start(a._startTime+a._duration)}),!1))}}),f});
//# sourceMappingURL=tween.js.map